#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# è®¾ç½®CIç¯å¢ƒå˜é‡ï¼Œä½¿æµ‹è¯•æ›´ç¨³å®š
export CI=true
export NODE_ENV=test

# è¿è¡Œæµ‹è¯•ï¼Œä½¿ç”¨ä¸“é—¨çš„CIé…ç½®
echo "ğŸ§ª Running tests before push..."
npm run test:ci || {
  echo "âŒ Tests failed! Push aborted."
  echo "ğŸ’¡ Tip: Run 'npm run test:ci' locally to debug"
  echo "ğŸ’¡ Fix the tests before pushing - do NOT use --no-verify"
  exit 1
}

echo "âœ… All tests passed!"
