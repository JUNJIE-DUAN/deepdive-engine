{
  "id": "comparison.v1",
  "name": "生成对比分析",
  "category": "comparison",
  "version": 1,
  "description": "比较多个资源的关键差异与共性",
  "schema": {
    "type": "object",
    "properties": {
      "executiveSummary": { "type": "string" },
      "comparisonTable": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "aspect": { "type": "string" },
            "resourceFindings": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "resourceId": { "type": "string" },
                  "insight": { "type": "string" }
                },
                "required": ["resourceId", "insight"]
              }
            }
          },
          "required": ["aspect", "resourceFindings"]
        }
      },
      "keyInsights": {
        "type": "array",
        "items": {
          "type": "object",
          "properties": {
            "title": { "type": "string" },
            "description": { "type": "string" },
            "importance": { "type": "string" }
          },
          "required": ["title", "description"]
        }
      }
    },
    "required": ["executiveSummary", "comparisonTable", "keyInsights"]
  },
  "promptConfig": {
    "extract": "针对以下资源生成结构化摘要，包括主题、关键方法、结果与局限性。",
    "analysis": "请比较这些资源，输出不少于三个维度的对比，说明差异与共性。",
    "generate": "仅返回符合 schema 的 JSON，不要包含额外文本或注释。",
    "validationHints": [
      "comparisonTable 至少包含 3 个维度",
      "每个 insight 需要提供 resourceId"
    ],
    "failureRecovery": [
      {
        "type": "json_error",
        "prompt": "你的 JSON 结构有误，请重新输出符合 schema 的 JSON。"
      },
      {
        "type": "missing_field",
        "prompt": "结果缺少 {field} 字段，请补充后重新输出 JSON。"
      }
    ]
  }
}
