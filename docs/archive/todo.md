# AI Office 完整TODO List

## 已完成 ✅

### Phase 1: 基础功能实现

- [x] 资源列表显示真实数据（从store获取）
- [x] 实现资源管理功能（全选、批量删除、清空）
- [x] 更新MiddlePanel显示真实资源数量
- [x] 实现AI对话功能 - 显示对话历史
- [x] 创建AI API路由和服务
- [x] 实现AI对话功能 - 发送消息和接收响应
- [x] 实现文档类型数据模型
- [x] 创建文档模板数据结构（6种文档类型，12个模板）
- [x] 构建文档生成向导UI（三步流程）
- [x] 集成向导到ChatPanel
- [x] 修复AI对话面板滚动问题
- [x] 修复右侧文档区域头部固定
- [x] 添加AI生成停止功能
- [x] 实现文档显示和编辑
- [x] 实现文档导出功能（Markdown）

## 进行中 🔄

### UI/UX优化

- [ ] **左侧菜单默认折叠** ⭐ 新增
  - 修改Sidebar组件，默认isCollapsed为true
  - 保持折叠状态的本地存储

- [ ] **调整文档和AI助手宽度比例为3:2** ⭐ 新增
  - 当前默认550px需要调整
  - 假设总宽度1500px，AI助手应为600px，文档900px
  - 根据屏幕宽度动态计算

## 待完成 📋

### Phase 2: 智能资源扩展系统（核心功能）

#### 2.1 图片搜索模块

- [ ] 创建图片搜索服务
  - [ ] 集成Unsplash API
  - [ ] 集成Google Images API（需要API Key）
  - [ ] 实现关键词提取
  - [ ] 图片相关性评分
  - [ ] 图片缓存机制

#### 2.2 数据获取模块

- [ ] 权威数据源集成
  - [ ] World Bank API（经济数据）
  - [ ] Statista API（统计数据）
  - [ ] 自定义数据爬虫
  - [ ] 数据验证和清洗

#### 2.3 文献检索模块

- [ ] 学术数据库集成
  - [ ] arXiv API集成
  - [ ] PubMed API集成
  - [ ] Google Scholar爬虫
  - [ ] 引用格式转换（APA/MLA/IEEE/GB）
  - [ ] 文献相关性排序

#### 2.4 报告查找模块

- [ ] 行业报告源
  - [ ] 咨询公司报告抓取
  - [ ] 研究机构API集成
  - [ ] PDF解析和文本提取
  - [ ] 报告摘要生成

#### 2.5 资源扩展API

- [ ] 创建统一的资源扩展API
  - 路径: `/api/v1/ai-office/extend-resources`
  - 支持并发搜索
  - 实现超时控制
  - 结果聚合和排序

### Phase 3: 文档生成优化

#### 3.1 生成进度显示

- [ ] 创建进度组件
  - [ ] 实时显示当前步骤
  - [ ] 显示已找到的扩展资源数量
  - [ ] 预计剩余时间
  - [ ] 可取消操作

#### 3.2 流式生成优化

- [ ] 按章节流式生成
  - [ ] 章节级别的进度显示
  - [ ] 章节生成完成通知
  - [ ] 支持章节级重新生成

#### 3.3 大纲编辑功能

- [ ] 创建大纲编辑组件
  - [ ] 树形结构展示
  - [ ] 拖拽调整章节顺序
  - [ ] 添加/删除章节
  - [ ] 修改章节AI提示

### Phase 4: 文档编辑增强

#### 4.1 富文本编辑器

- [ ] 集成富文本编辑库（如Tiptap或Slate）
  - [ ] Markdown快捷键支持
  - [ ] 实时预览
  - [ ] 代码高亮
  - [ ] 表格编辑

#### 4.2 AI辅助编辑

- [ ] 针对选中文本的AI操作
  - [ ] 扩展内容
  - [ ] 精简内容
  - [ ] 改变语气
  - [ ] 翻译
  - [ ] 修正语法

#### 4.3 版本历史

- [ ] 实现文档版本控制
  - [ ] 自动保存历史版本
  - [ ] 版本对比
  - [ ] 回退到历史版本

### Phase 5: 多格式导出

#### 5.1 Word导出

- [ ] 集成docx库
  - [ ] Markdown转Word
  - [ ] 样式保留
  - [ ] 图片嵌入
  - [ ] 目录生成

#### 5.2 PDF导出

- [ ] 集成PDF生成库
  - [ ] 专业排版
  - [ ] 页眉页脚
  - [ ] 水印支持
  - [ ] 目录书签

#### 5.3 PPT导出

- [ ] 集成pptx库
  - [ ] 根据模板生成幻灯片
  - [ ] 自动布局
  - [ ] 图表嵌入
  - [ ] 主题定制

### Phase 6: 协作与分享

#### 6.1 文档分享

- [ ] 生成分享链接
  - [ ] 权限控制（只读/编辑）
  - [ ] 过期时间设置
  - [ ] 访问统计

#### 6.2 团队协作

- [ ] 多人协作编辑
  - [ ] 实时同步
  - [ ] 冲突解决
  - [ ] 评论功能
  - [ ] @提及功能

### Phase 7: 数据分析与优化

#### 7.1 使用分析

- [ ] 统计面板
  - [ ] 文档生成数量
  - [ ] 使用频率最高的模板
  - [ ] 平均生成时间
  - [ ] 资源扩展效果

#### 7.2 质量优化

- [ ] AI模型优化
  - [ ] 提示工程优化
  - [ ] A/B测试
  - [ ] 用户反馈收集
  - [ ] 生成质量评分

## 优先级排序

### P0 - 必须立即完成

1. 左侧菜单默认折叠
2. 调整文档和AI助手宽度比例为3:2
3. 生成进度显示优化

### P1 - 本周完成

1. 图片搜索模块（Unsplash API）
2. 文献检索模块（arXiv API）
3. 大纲编辑功能
4. Word导出

### P2 - 两周内完成

1. 数据获取模块
2. 报告查找模块
3. 富文本编辑器
4. PDF导出
5. PPT导出

### P3 - 一个月内完成

1. AI辅助编辑
2. 版本历史
3. 文档分享
4. 使用分析

### P4 - 长期规划

1. 团队协作
2. 质量优化系统

## 实施时间线

### Week 1-2: UI优化 + 智能扩展基础

- 完成P0任务
- 实现图片搜索和文献检索
- 优化生成进度显示

### Week 3-4: 智能扩展完善 + 编辑增强

- 完成数据获取和报告查找
- 实现大纲编辑
- 集成富文本编辑器

### Week 5-6: 导出功能 + AI辅助

- 完成多格式导出
- 实现AI辅助编辑
- 版本历史功能

### Week 7-8: 协作与优化

- 文档分享功能
- 使用分析面板
- 性能优化和测试

## 成功指标

### 质量指标

- [ ] 文档生成成功率 > 95%
- [ ] 用户满意度 > 4.0/5.0
- [ ] 内容准确性评分 > 4.2/5.0
- [ ] 智能扩展相关性 > 80%

### 性能指标

- [ ] 平均生成时间 < 3分钟
- [ ] 资源扩展响应时间 < 30秒
- [ ] 并发处理能力 > 10个任务
- [ ] 系统可用性 > 99%

### 业务指标

- [ ] 用户留存率 > 60%
- [ ] 功能使用率 > 40%
- [ ] 文档导出率 > 70%
- [ ] 日活用户 > 100

## 技术债务

### 需要重构

- [ ] ChatPanel组件过大，需要拆分
- [ ] 类型定义需要统一到types/ai-office.ts
- [ ] API错误处理需要统一

### 需要优化

- [ ] 流式响应解析器需要抽取为公共函数
- [ ] Store更新逻辑需要使用Immer优化
- [ ] 组件样式需要提取到Tailwind配置

### 需要文档

- [ ] API文档需要完善
- [ ] 组件使用文档
- [ ] 部署文档
- [ ] 用户使用手册
